@using GreenBushIEP.Models
@model GreenBushIEP.Models.IEPFormFileViewModel

@{
    ViewBag.Title = "Parents Rights";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var imageChecked = Request.Url.Scheme + "://" + Request.Url.Authority + Url.Content("~/Content/Images/check_yes.png");
    var imageNotChecked = Request.Url.Scheme + "://" + Request.Url.Authority + Url.Content("~/Content/Images/check_no.png");

}

@section stylesheets {
    @Styles.Render("~/Content/transition.css")
}

<style>
     .imgCheck{
        display:none

    }

    .fadeInToBackground {
        background: #525659;
        transition: background .25s ease-in-out;
        -moz-transition: background .25s ease-in-out;
        -webkit-transition: background .25s ease-in-out;
    }

    .fadeOutToBackground {
        background: #fff;
        transition: background .25s ease-in-out;
        -moz-transition: background .25s ease-in-out;
        -webkit-transition: background .25s ease-in-out;
    }

    .glyphicon-remove-circle:hover {
        cursor: pointer;
    }

    .transition-page-scaleUpCenter {
        -webkit-animation: scaleUpCenter .4s ease-out both;
        animation: scaleUpCenter .4s ease-out both;
        width: 900px;
    }

    .transition-page-scaleDownCenter {
        -webkit-animation: scaleDownCenter .4s ease-in both;
        animation: scaleDownCenter .4s ease-in both;
    }

    @@-webkit-keyframes scaleUpCenter {
        from {
            opacity: 0;
            -webkit-transform: scale(.7);
        }
    }

    @@keyframes scaleUpCenter {
        from {
            opacity: 0;
            -webkit-transform: scale(.7);
            transform: scale(.7);
        }
    }

    @@-webkit-keyframes scaleDownCenter {
        from {
        }

        to {
            opacity: 0;
            -webkit-transform: scale(.7);
        }
    }

    @@keyframes scaleDownCenter {
        from {
        }

        to {
            opacity: 0;
            -webkit-transform: scale(.7);
            transform: scale(.7);
        }
    }

    /* Font Definitions */
    @@font-face {
        font-family: Wingdings;
    }

    @@font-face {
        font-family: "Cambria Math";
    }

    @@font-face {
        font-family: "Arial Narrow";
    }

    @@font-face {
        font-family: Tahoma;
    }

    @@font-face {
        font-family: "Zapf Dingbats";
    }

    /* Style Definitions */
    p.MsoNormal, li.MsoNormal, div.MsoNormal {
        margin: 0in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    h1 {
        margin-top: 0in;
        margin-right: .75in;
        margin-bottom: 0in;
        margin-left: 1.0in;
        margin-bottom: .0001pt;
        text-align: center;
        page-break-after: avoid;
        border: none;
        padding: 0in;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    h2 {
        margin: 0in;
        margin-bottom: .0001pt;
        text-align: center;
        page-break-after: avoid;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    h5 {
        margin: 0in;
        margin-bottom: .0001pt;
        font-size: 12.0pt;
        font-family: "Arial Narrow",sans-serif;
        font-weight: normal;
    }

    p.MsoHeader, li.MsoHeader, div.MsoHeader {
        margin: 0in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    p.MsoFooter, li.MsoFooter, div.MsoFooter {
        margin: 0in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    p.MsoAcetate, li.MsoAcetate, div.MsoAcetate {
        margin: 0in;
        margin-bottom: .0001pt;
        font-size: 8.0pt;
        font-family: "Tahoma",sans-serif;
    }

    p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph {
        margin-top: 0in;
        margin-right: 0in;
        margin-bottom: 0in;
        margin-left: .5in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst {
        margin-top: 0in;
        margin-right: 0in;
        margin-bottom: 0in;
        margin-left: .5in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle {
        margin-top: 0in;
        margin-right: 0in;
        margin-bottom: 0in;
        margin-left: .5in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast {
        margin-top: 0in;
        margin-right: 0in;
        margin-bottom: 0in;
        margin-left: .5in;
        margin-bottom: .0001pt;
        font-size: 10.0pt;
        font-family: "Times New Roman",serif;
    }

    /* List Definitions */
    ol {
        margin-bottom: 0in;
    }

    ul {
        margin-bottom: 0in;
    }

    .sectionHeader
    {
        margin-top:15px;
    }

    @@page {
        margin: 0;
    }

    @@media print {
        @@page {
            margin: 0.5cm;
        }

        body {
            margin: 1.4cm;
            overflow: visible;
        }

        .transition-page-scaleUpCenter {
            border: none !important;
        }

        #backtoportal {
            display: none;
        }

        #printbutton {
            display: none;
        }

        footer {
            display: none;
        }

        input[type=text] {
            background: transparent;
            border-top: transparent !important;
            border-left: transparent !important;
            border-right: transparent !important;
            border-bottom: 1px solid !important;
            font-weight: 200;
            color: white;
            padding-left: 0;
        }

         textarea {
              border: none !important;
              background-color: transparent;
              resize: none;
              outline: none;
              overflow: auto;
              outline: none;
              border-top: transparent !important;
              border-left: transparent !important;
              border-right: transparent !important;
            

            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;
        }

         .page-break{
             page-break-before:always;
             padding-top:50px;
         }
    }
</style>
<div class="transition-page" style="margin-bottom: 45px; display: none;">
    <div class="container" style="min-height: 1250px; width: 725px;">
        <div class="row" style="margin-top: 25px; margin-left: -200px; position: fixed;">
            <div class="col-md-11">
                <form action=@Url.Action("DownloadPDF", "Home") id="frmPrint" class="form-print" method="post">
                    @*<button type="button" class="btn btn-info" id="printbutton" onclick="return window.print();">Print</button>*@
                    <input type="button" value="Print" onclick="PrintText();" class="btn btn-info print" />
                    <input type="button" value="Archive" onclick="ArchiveText();" class="btn btn-info print" style="margin-top:5px" />
                    <input type="hidden" id="printText" name="printText" />
                    <input type="hidden" id="isArchive" name="isArchive" />
                    <input type="hidden" id="studentName" name="studentName" value="" />
                    <input type="hidden" id="studentId" name="studentId" value="@Model.studentId" />
                    <input type="hidden" id="iepID" name="iepID" value="@Model.iepId" />   
                    <input type="hidden" id="isIEP" name="isIEP" value="0" /> 
                    <input type="hidden" id="formName" name="formName" value="@Model.fileDesc" /> 
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 pull-right">
                @Html.ActionLink(" ", null, null, null, new { href = Request.UrlReferrer, id = "backtoportal", title = "Cancel action and go back to my current users list", role = "button", @class = "glyphicon glyphicon-remove btn btn-info pull-right", style = "margin-top:20px;margin-bottom:10px;margin-right: -75px;font-size:20px;font-weight:bold;" })
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div align="left">
                    <div class="col-md-12 ">
                        @Html.Partial("~/Views/Form/" + Model.fileName + ".cshtml", Model.fileModel)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    // this is the equivalent to $(function(){ });
    document.addEventListener("DOMContentLoaded", function (event) {

        var body = document.getElementsByTagName("body")[0];
        body.classList += ' ' + 'fadeInToBackground';

        var el = document.getElementsByClassName("body-content")[0], c = el.style;
        c.borderLeft = "1px solid #000";
        c.borderRight = "1px solid #000";
        c.boxShadow = "10px 10px 25px #333";
        c.position = "relative";
        c.top = "15px";
        c.backgroundColor = "#ffffff";
        c.marginBottom = "5px";

        setTimeout(function () {
            var tp = document.getElementsByClassName("transition-page")[0];
            tp.style.display = "block";

            var className = 'transition-page-scaleUpCenter';
            if (el.classList) {
                el.classList.add(className);
            } else {
                el.className += ' ' + className;
            }
        }, 200);

        // attach event to the close button
        // return user to the teacherportal page if they chose NOT to print the consent form. WE CANNOT GO FORWARD WITH THIS STUDENT
        document.getElementById('backtoportal').onclick = function (event) {
            event.preventDefault();

            var content = document.getElementsByClassName('body-content');
            content[0].classList.add('transition-page-scaleDownCenter');

            setTimeout(function () {
                window.location = document.getElementById('backtoportal').getAttribute("href");
            }, 100);
        }


        //setup up hidden checkbox images for printing to pdf
        $('input:checkbox').change(function () {
            if ($(this).is(":checked")) {
                $(this).addClass("menuitemshow");
                $(this).next('img.imgCheck').attr("src", '@(@imageChecked)');               
            } else {
                $(this).next('img.imgCheck').attr("src", '@(@imageNotChecked)');                
            }
        });

    });

    function PrintText() {
        var x = document.getElementsByClassName("form-print");
        var markup = document.getElementsByClassName("module-page")[0].innerHTML;
        $("#printText").val(markup);
        $("#isArchive").val(0);
        x[0].submit();
    }

    function ArchiveText() {

        var x = document.getElementsByClassName("form-print");
        var markup = document.getElementsByClassName("module-page")[0].innerHTML;
        $("#printText").val(markup);
        $("#isArchive").val(1);
        x[0].submit();
    }



</script>
