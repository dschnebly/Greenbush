@model  GreenBushIEP.Models.IEPFormViewModel

@{
	ViewBag.Title = "Student Forms";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
	label.file-upload{position:relative;overflow:hidden}
	label.file-upload input[type=file]{
		position:absolute;
		top:0;
		right:0;
		min-width:100%;
		min-height:100%;
		font-size:100px;
		text-align:right;
		filter:alpha(opacity=0);
		opacity:0;
		outline:0;
		background:#fff;
		cursor:inherit;
		display:block

	}
	
</style>
<div class="modal-header">
	<a class="glyphicon glyphicon-arrow-left btn btn-info pull-right" data-ajax="false" data-ftrans="slide reverse " href="/Home/Portal" id="backtoportal" role="button" style="font-size:20px;font-weight:bold;" title="Cancel action and go back to my current users list"></a>
	<h4 class="modal-title" id="myModalLabel" style="font-size: 30px;"><i class="glyphicon glyphicon-folder-open" aria-hidden="true" style="font-size: smaller; "></i>&nbsp;Forms</h4>
</div>

<div class="modal-body">
	@Html.Hidden("stid", Model.StudentId)

	<ul class="nav nav-tabs">
		<li class="active"><a data-toggle="tab" href="#sectionB"><b>Archive</b></a></li>
		<li><a data-toggle="tab" href="#sectionA"><b>Forms</b></a></li>
		<li><a data-toggle="tab" href="#sectionC"><b>Upload File</b></a></li>
	</ul>
	<div class="tab-content container">
		<div id="sectionB" class="tab-pane fade in active" style="padding-left:5px;padding-top:5px;">
			<table class="table" style="width:90%" id="tblArchives">
				<thead>
					<tr>
						<th class="name truncate">Form Name</th>
						<th class="date">Date</th>
						<th class="date">&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					@{
						foreach (var archive in Model.Archives)
						{
							<tr>

								<td class="name truncate">@archive.FormName</td>
								<td class="name truncate">@archive.ArchiveDate</td>
								<td class="date"><button type="button" class="btn btn-default btn-lg downloadForm" id="@archive.FormArchiveID"><i class="fa fa-print"></i><span>&nbsp;Download</span></button></td>
							</tr>
						}
					}
				</tbody>
			</table>
		</div>
		<div id="sectionA" class="tab-pane fade" style="padding-left:5px;padding-top:5px;">
			<div class="drive-wrapper drive-list-view">
				<div class="table-responsive drive-items-table-wrapper">
					<table class="table">
						<thead>
							<tr>
								<th class="type"></th>
								<th class="name truncate">Name</th>
								<th class="date">&nbsp;</th>
							</tr>
						</thead>
						<tbody>
							@{
								foreach (var form in Model.IEPForms)
								{
									<tr>
										<td class="type" style="cursor: default;"><i class="fa fa-file-text-o text-primary"></i></td>
										<td class="name truncate"><a href="#" id="@form.Value">@form.Text</a></td>
										<td class="date"><button type="button" class="btn btn-default btn-lg printForm" id="@form.Value"><i class="fa fa-print"></i><span>&nbsp;Print Form</span></button></td>
									</tr>
								}
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div id="sectionC" class="tab-pane fade in" style="padding-top:25px;">
				
				<div class="form-group">
					<div class="col-md-12">
						<div class="alert alert-danger" id="alertMessage" role="alert" style="display: none;">
						<strong class="moreinfo">Oh snap!</strong>
						</div>
						<label class="file-upload btn btn-primary">
							<i class="glyphicon glyphicon-plus"></i> Choose file.. <input type="file" id="files" name="files" class="studentFile" accept="application/pdf" />
						</label>					
						@*<div id="progress" class="progress voffset2">
							<div class="progress-bar progress-bar-success"></div>
						</div>*@
					</div>
					 
				</div>
			
		</div>
	</div>

</div>

@*<script>
	function _download(id) {
		window.location.href = '/Home/DownloadArchive?id=' + id;
	}
</script>*@
<!-- loading the file even though it's an ajax call -->
<var data-reload="true" data-src="/Scripts/studentForms.js"></var>
<var data-reload="true" data-src="/Scripts/jquery.fileupload.js"></var>
@section scripts {
	@Scripts.Render("~/Scripts/studentForms.js")
	@Scripts.Render("~/Scripts/jquery.fileupload.js")
}